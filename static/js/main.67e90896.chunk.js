(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(54)},39:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),i=(n(39),n(40),n(2)),s=n(3),l=n(6),u=n(4),p=n(5),m=n(11),h=n(17),v=n(18),f=n(10),g="49a3e8d3e3d07290e14ee51a63085f42",b="en-US",d=function(e){return e?"".concat("http://image.tmdb.org/t/p/w500").concat(e):"https://via.placeholder.com/255x150?text=Placeholder"},y=function(){return"_"+Math.random().toString(36).substr(2,9)},O="REQUEST",E="REQUEST_SUCCESS",j="REQUEST_FAIL",P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){t({type:O}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="https://api.themoviedb.org/3/movie/popular?api_key=".concat(g,"&language=").concat(b,"&page=").concat(e);return fetch(t).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e).then(function(e){t({type:E,payload:e})}).catch(function(e){t({type:j,payload:e,error:!0})})}};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w={moviesData:null,isFetching:!1};var D="REQUEST1",S="REQUEST_SUCCESS1",_="REQUEST_FAIL1",C=function(){return function(e){e({type:D}),function(){var e="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(g,"&language=").concat(b);return fetch(e).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}().then(function(t){console.log("data",t),e({type:S,payload:t})}).catch(function(t){e({type:_,payload:t,error:!0})})}};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F={genresData:null,isFetching:!1};var T="SET_PAGE";function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var U={page:1};var x="REQUESTBYID",A="REQUESTBYID_SUCCESS",G="REQUESTBYID_FAIL",Q=function(e){return function(t){t({type:x}),function(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(g,"&language=").concat(b);return fetch(t).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e).then(function(e){t({type:A,payload:e})}).catch(function(e){t({type:G,payload:e,error:!0})})}};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H={movieDetails:null,isFetching:!1};var Y="REQUEST",J="REQUEST_SUCCESS",V="REQUEST_FAIL",q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){n({type:Y}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="https://api.themoviedb.org/3/search/movie?query=".concat(t,"&page=").concat(e,"&language=").concat(b,"&api_key=").concat(g);return fetch(n).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e,t).then(function(e){n({type:J,payload:e})}).catch(function(e){n({type:V,payload:e,error:!0})})}};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W={moviesData:null,isFetching:!1};var X="SET_SEARCH_PHRASE";function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var $={searchPhrase:""};var ee=Object(v.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return k({},e,{isFetching:!0});case E:return k({},e,{isFetching:!1,moviesData:t.payload});case j:return k({},e,{isFetching:!1,moviesData:null});default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return R({},e,{isFetching:!0});case S:return R({},e,{isFetching:!1,genresData:t.payload});case _:return R({},e,{isFetching:!1,genresData:null});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{page:t.payload});default:return e}},movieDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return B({},e,{isFetching:!0});case A:return B({},e,{isFetching:!1,movieDetails:t.payload});case G:return B({},e,{isFetching:!1,movieDetails:null});default:return e}},searchMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return K({},e,{isFetching:!0});case J:return K({},e,{isFetching:!1,moviesData:t.payload});case V:return K({},e,{isFetching:!1,moviesData:null});default:return e}},searchPhrase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{searchPhrase:t.payload});default:return e}}}),te=n(30),ne=n.n(te),ae=n(31),re=Object(v.d)(ee,Object(v.a)(ae.a,ne.a)),ce=n(14),oe=(n(45),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getGenresList",value:function(e){var t=this.props.genres;if(t.genresData)return t.genresData.genres.filter(function(t){return e.some(function(e){return e===t.id})})}},{key:"renderGenresList",value:function(e){return e.map(function(e){return r.a.createElement("span",{className:"genre-item",key:y()},e.name)})}},{key:"checkMovieForAdult",value:function(e){return e?r.a.createElement("div",{className:"movie-adult"},"18+"):""}},{key:"render",value:function(){var e,t=this.props.content,n=t.backdrop_path,a=t.genre_ids,c=t.id,o=t.title,i=t.vote_average,s=t.release_date,l=t.overview,u=t.adult,p=this.getGenresList(a),m="/movie/".concat(c);return r.a.createElement("div",{className:"col-lg-3 col-md-6 col-12 movies-item"},r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:d(n),alt:"camera-thumb",className:"img-thumbnail movie-thumb"})),r.a.createElement(ce.b,{to:m},r.a.createElement("h5",{className:"movie-title"},o)),r.a.createElement("div",{className:"movie-info"},r.a.createElement("p",{className:"movie-info__genres"},this.renderGenresList(p)),r.a.createElement("p",{className:"movie-info__description"},(e=l).length>80?"".concat(e.substring(0,76),"..."):e),r.a.createElement("div",{className:"movie-info__vote"},r.a.createElement("p",null,"Average rating: ",i)),r.a.createElement("p",{className:"movie-info__date"},s),r.a.createElement(ce.b,{to:m,className:"btn btn-success"},"Link")),this.checkMovieForAdult(u))}}]),t}(a.Component)),ie=Object(m.b)(function(e){return{genres:e.genres}})(oe),se=n(19),le=(n(47),"LEFT"),ue="RIGHT",pe=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e,r=[];a<=t;)r.push(a),a+=n;return r},me=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).gotoPage=function(e){var t=n.props.onPageChanged,a=void 0===t?function(e){return e}:t,r=Math.max(0,Math.min(e,n.totalPages)),c={currentPage:r,totalPages:n.totalPages,totalRecords:n.totalRecords};n.changePage(r).then(function(e){e&&a(c)})},n.handleClick=function(e,t){t.preventDefault(),console.log("page",e),n.gotoPage(e)},n.handleMoveLeft=function(e){e.preventDefault(),n.gotoPage(n.props.page-2*n.pageNeighbours-1)},n.handleMoveRight=function(e){e.preventDefault(),n.gotoPage(n.props.page+2*n.pageNeighbours+1)},n.fetchPageNumbers=function(){var e=n.totalPages,t=n.props.page,a=n.pageNeighbours,r=2*n.pageNeighbours+3;if(e>r+2){var c=[],o=t-a,i=t+a,s=e-1,l=o>2?o:2,u=i<s?i:s,p=r-(c=pe(l,u)).length-1,m=l>2,h=u<s,v=le,f=ue;if(m&&!h){var g=pe(l-p,l-1);c=[v].concat(Object(se.a)(g),Object(se.a)(c))}else if(!m&&h){var b=pe(u+1,u+p);c=[].concat(Object(se.a)(c),Object(se.a)(b),[f])}else m&&h&&(c=[v].concat(Object(se.a)(c),[f]));return[1].concat(Object(se.a)(c),[e])}return pe(1,e)};var a=e.totalRecords,r=void 0===a?null:a,c=e.pageNeighbours,o=void 0===c?0:c;return n.totalRecords="number"===typeof r?r:0,n.pageNeighbours="number"===typeof o?Math.max(0,Math.min(o,2)):0,n.totalPages=e.totalPages,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"changePage",value:function(e){return new Promise(function(t){re.dispatch(function(e){return{type:T,payload:e}}(e)),t(!0)})}},{key:"render",value:function(){var e=this;if(!this.totalRecords)return null;if(1===this.totalPages)return null;var t=this.props.page,n=this.fetchPageNumbers();return r.a.createElement("div",{className:"pagination-wrap"},r.a.createElement("nav",{"aria-label":"Pagination"},r.a.createElement("ul",{className:"pagination"},n.map(function(n,a){return n===le?r.a.createElement("li",{key:a,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},r.a.createElement("span",{"aria-hidden":"true"},"\xab"),r.a.createElement("span",{className:"sr-only"},"Previous"))):n===ue?r.a.createElement("li",{key:a,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},r.a.createElement("span",{"aria-hidden":"true"},"\xbb"),r.a.createElement("span",{className:"sr-only"},"Next"))):r.a.createElement("li",{key:a,className:"page-item".concat(t===n?" active":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(t){return e.handleClick(n,t)}},n))}))))}}]),t}(a.Component),he=Object(m.b)(function(e){return{page:e.page.page}})(me),ve=n(33),fe=(n(48),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).inputRef=r.a.createRef(),n.onPageChanged=n.onPageChanged.bind(Object(h.a)(n)),n.performSearch=n.performSearch.bind(Object(h.a)(n)),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderMoviesList",value:function(e){return e?e.results.map(function(e){return r.a.createElement(ie,{content:e,key:y()})}):r.a.createElement("div",null,"There are no movies...")}},{key:"onPageChanged",value:function(){var e=this.props,t=e.getMovies,n=e.page,a=e.searchPhrase,r=e.searchMovies;a?r(n,a):t(n)}},{key:"renderTemplate",value:function(){var e=this.props,t=e.movies;return e.isFetching?r.a.createElement("p",{className:"loading"},"Loading..."):r.a.createElement("div",{className:"row movies-row"},this.renderMoviesList(t),r.a.createElement(he,{totalRecords:20,pageNeighbours:1,onPageChanged:this.onPageChanged,totalPages:t?t.total_pages:0}))}},{key:"performSearch",value:function(){var e=this.inputRef.current.value,t=this.props,n=t.searchMovies,a=t.getMovies;e.length>0?n(1,e):a(1),re.dispatch({type:X,payload:e})}},{key:"render",value:function(){return r.a.createElement("section",{className:"movies-wrap"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"movies-wrap-header"},r.a.createElement("h3",{className:"movies-wrap-title"},"Popular movies"),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",ref:this.inputRef,onInput:Object(ve.debounce)(this.performSearch,500)}))),this.renderTemplate()))}}]),t}(a.Component)),ge=Object(m.b)(function(e){return{page:e.page.page,searchPhrase:e.searchPhrase.searchPhrase}},function(e){return{getGenres:function(){return e(C())},getMovies:function(t){return e(P(t))},searchMovies:function(t,n){return e(q(t,n))}}})(fe),be=(n(49),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderNavigationMenuList",value:function(){return this.props.routes.map(function(e){return r.a.createElement("li",{className:"nav-item",key:y()},r.a.createElement(ce.b,{exact:e.isExact,activeClassName:"active",className:"nav-link",to:e.path},e.name))})}},{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(ce.b,{to:"/",className:"navbar-brand"},"Movies app"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},this.renderNavigationMenuList()))))}}]),t}(a.Component)),de=n(16),ye=(n(50),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"about-section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"section-title"},"About page")))))}}]),t}(a.Component)),Oe=(n(51),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;(0,this.props.getMovieDetails)(e)}},{key:"renderTemplate",value:function(){var e=this.props.movieDetails;if(e){e.backdrop_path,e.genres,e.homepage;var t=e.original_title,n=e.overview,a=e.poster_path,c=e.release_date,o=e.status,i=e.title,s=e.vote_average,l=e.vote_count;return r.a.createElement("div",{className:"container"},r.a.createElement(ce.b,{to:"/",className:"navlink-back"},"< Go back"),r.a.createElement("h2",{className:"content-title"},i,"(",t,")"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("img",{src:d(a),alt:"movie-thumb",className:"img-thumbnail movie-thumb-full"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("ul",null,r.a.createElement("li",null,"Genres: "),r.a.createElement("li",null,"Releaase date: ",c),r.a.createElement("li",null,"Status: ",o),r.a.createElement("li",null,"Votes: ",l),r.a.createElement("li",null,"Vote average: ",s)),r.a.createElement("p",null,n))))}return""}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",{className:"page-content"},this.renderTemplate()))}}]),t}(a.Component)),Ee=Object(m.b)(function(e){return{movieDetails:e.movieDetails.movieDetails}},function(e){return{getMovieDetails:function(t){return e(Q(t))}}})(Oe),je=[{isNavBar:!0,isExact:!0,path:"/",name:"Home",component:ge},{isNavBar:!0,path:"/about",name:"About",component:ye},{isNavBar:!1,path:"/movie/:id",name:"MovieItem",component:Ee}],Pe=(n(52),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(a.Component)),Ne=(n(53),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderSwitchContent",value:function(){return r.a.createElement(de.c,null,je.map(function(e){var t=e.component;return r.a.createElement(de.a,{key:e.path,exact:e.isExact,path:e.path,component:t})}))}},{key:"getGenresListAsync",value:function(){var e=this.props.getGenres;return new Promise(function(t){e(),t(!0)}).catch(function(e){return console.error(e)})}},{key:"handleMoviesData",value:function(){var e=this.props,t=e.getMovies,n=e.page;this.getGenresListAsync().then(function(e){e&&t(n)})}},{key:"componentDidMount",value:function(){this.handleMoviesData()}},{key:"render",value:function(){var e=this.props.movies;return r.a.createElement(ce.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(be,{routes:je.filter(function(e){return e.isNavBar})}),r.a.createElement("main",{className:"main"},r.a.createElement(de.c,null,r.a.createElement(de.a,{key:"/",path:"/",render:function(){return r.a.createElement(ge,{isFetching:e.isFetching,movies:e.moviesData})},exact:!0}),"/>",r.a.createElement(de.a,{key:"/about",path:"/about",component:ye}),r.a.createElement(de.a,{key:"/movie/:id",path:"/movie/:id",component:Ee}),r.a.createElement(de.a,{component:Pe})))))}}]),t}(a.Component)),ke=Object(m.b)(function(e){return{movies:e.movies,genres:e.genres.genresData}},function(e){return{getGenres:function(){return e(C())},getMovies:function(t){return e(P(t))}}})(Ne);o.a.render(r.a.createElement(m.a,{store:re},r.a.createElement(ke,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.67e90896.chunk.js.map