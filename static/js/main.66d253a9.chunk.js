(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(53)},38:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(38),a(39),a(2)),s=a(3),l=a(6),u=a(4),m=a(5),p=a(10),v=a(19),g=a(13),h="49a3e8d3e3d07290e14ee51a63085f42",f="en-US",b=function(e){return e?"".concat("http://image.tmdb.org/t/p/w500").concat(e):"https://via.placeholder.com/255x150?text=Placeholder"},d=function(){return"_"+Math.random().toString(36).substr(2,9)},y=(a(44),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getGenresList",value:function(e){var t=this.props.genres;if(t.genresData)return t.genresData.genres.filter(function(t){return e.some(function(e){return e===t.id})})}},{key:"renderGenresList",value:function(e){return e.map(function(e){return r.a.createElement("span",{className:"genre-item",key:d()},e.name)})}},{key:"checkMovieForAdult",value:function(e){return e?r.a.createElement("div",{className:"movie-adult"},"18+"):""}},{key:"render",value:function(){var e,t=this.props.content,a=t.backdrop_path,n=t.genre_ids,c=t.id,o=t.title,i=t.vote_average,s=t.release_date,l=t.overview,u=t.adult,m=this.getGenresList(n),p="/movie/".concat(c);return r.a.createElement("div",{className:"col-lg-3 col-md-6 col-12 movies-item"},r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:b(a),alt:"camera-thumb",className:"img-thumbnail movie-thumb"})),r.a.createElement(g.b,{to:p},r.a.createElement("h5",{className:"movie-title"},o)),r.a.createElement("div",{className:"movie-info"},r.a.createElement("p",{className:"movie-info__genres"},this.renderGenresList(m)),r.a.createElement("p",{className:"movie-info__description"},(e=l).length>80?"".concat(e.substring(0,76),"..."):e),r.a.createElement("div",{className:"movie-info__vote"},r.a.createElement("p",null,"Average rating: ",i)),r.a.createElement("p",{className:"movie-info__date"},s),r.a.createElement(g.b,{to:p,className:"btn btn-success"},"Link")),this.checkMovieForAdult(u))}}]),t}(n.Component)),E=Object(p.b)(function(e){return{genres:e.genres}})(y),O=a(18),j=a(17),N=a(15),P="REQUEST",k="REQUEST_SUCCESS",w="REQUEST_FAIL",D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){t({type:P}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="https://api.themoviedb.org/3/movie/popular?api_key=".concat(h,"&language=").concat(f,"&page=").concat(e);return fetch(t).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e).then(function(e){t({type:k,payload:e})}).catch(function(e){t({type:w,payload:e,error:!0})})}};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(N.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _={moviesData:null,isFetching:!1};var M="REQUEST1",F="REQUEST_SUCCESS1",R="REQUEST_FAIL1",L=function(){return function(e){e({type:M}),function(){var e="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(h,"&language=").concat(f);return fetch(e).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}().then(function(t){console.log("data",t),e({type:F,payload:t})}).catch(function(t){e({type:R,payload:t,error:!0})})}};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach(function(t){Object(N.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var G={genresData:null,isFetching:!1};var U="SET_PAGE";function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var I={page:1};var Q="REQUESTBYID",B="REQUESTBYID_SUCCESS",Y="REQUESTBYID_FAIL",H=function(e){return function(t){t({type:Q}),function(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(h,"&language=").concat(f);return fetch(t).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e).then(function(e){t({type:B,payload:e})}).catch(function(e){t({type:Y,payload:e,error:!0})})}};function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(a,!0).forEach(function(t){Object(N.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var q={movieDetails:null,isFetching:!1};var z=Object(j.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return C({},e,{isFetching:!0});case k:return C({},e,{isFetching:!1,moviesData:t.payload});case w:return C({},e,{isFetching:!1,moviesData:null});default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return x({},e,{isFetching:!0});case F:return x({},e,{isFetching:!1,genresData:t.payload});case R:return x({},e,{isFetching:!1,genresData:null});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(N.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{page:t.payload});default:return e}},movieDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return V({},e,{isFetching:!0});case B:return V({},e,{isFetching:!1,movieDetails:t.payload});case Y:return V({},e,{isFetching:!1,movieDetails:null});default:return e}}}),K=a(31),W=a.n(K),X=a(32),Z=Object(j.d)(z,Object(j.a)(X.a,W.a)),$=(a(46),"LEFT"),ee="RIGHT",te=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=t;)r.push(n),n+=a;return r},ae=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).gotoPage=function(e){var t=a.props.onPageChanged,n=void 0===t?function(e){return e}:t,r=Math.max(0,Math.min(e,a.totalPages)),c={currentPage:r,totalPages:a.totalPages,totalRecords:a.totalRecords};a.changePage(r).then(function(e){e&&n(c)})},a.handleClick=function(e,t){t.preventDefault(),console.log("page",e),a.gotoPage(e)},a.handleMoveLeft=function(e){e.preventDefault(),a.gotoPage(a.props.page-2*a.pageNeighbours-1)},a.handleMoveRight=function(e){e.preventDefault(),a.gotoPage(a.props.page+2*a.pageNeighbours+1)},a.fetchPageNumbers=function(){var e=a.totalPages,t=a.props.page,n=a.pageNeighbours,r=2*a.pageNeighbours+3;if(e>r+2){var c=[],o=t-n,i=t+n,s=e-1,l=o>2?o:2,u=i<s?i:s,m=r-(c=te(l,u)).length-1,p=l>2,v=u<s,g=$,h=ee;if(p&&!v){var f=te(l-m,l-1);c=[g].concat(Object(O.a)(f),Object(O.a)(c))}else if(!p&&v){var b=te(u+1,u+m);c=[].concat(Object(O.a)(c),Object(O.a)(b),[h])}else p&&v&&(c=[g].concat(Object(O.a)(c),[h]));return[1].concat(Object(O.a)(c),[e])}return te(1,e)};var n=e.totalRecords,r=void 0===n?null:n,c=e.pageNeighbours,o=void 0===c?0:c;return a.totalRecords="number"===typeof r?r:0,a.pageNeighbours="number"===typeof o?Math.max(0,Math.min(o,2)):0,a.totalPages=992,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"changePage",value:function(e){return new Promise(function(t){Z.dispatch(function(e){return{type:U,payload:e}}(e)),t(!0)})}},{key:"render",value:function(){var e=this;if(!this.totalRecords)return null;if(1===this.totalPages)return null;var t=this.props.page,a=this.fetchPageNumbers();return r.a.createElement("div",{className:"pagination-wrap"},r.a.createElement("nav",{"aria-label":"Pagination"},r.a.createElement("ul",{className:"pagination"},a.map(function(a,n){return a===$?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},r.a.createElement("span",{"aria-hidden":"true"},"\xab"),r.a.createElement("span",{className:"sr-only"},"Previous"))):a===ee?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},r.a.createElement("span",{"aria-hidden":"true"},"\xbb"),r.a.createElement("span",{className:"sr-only"},"Next"))):r.a.createElement("li",{key:n,className:"page-item".concat(t===a?" active":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(t){return e.handleClick(a,t)}},a))}))))}}]),t}(n.Component),ne=Object(p.b)(function(e){return{page:e.page.page}})(ae),re=(a(47),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onPageChanged=a.onPageChanged.bind(Object(v.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderMoviesList",value:function(e){return e?e.results.map(function(e){return r.a.createElement(E,{content:e,key:d()})}):r.a.createElement("div",null,"There are no movies...")}},{key:"onPageChanged",value:function(){var e=this.props;(0,e.getMovies)(e.page)}},{key:"renderTemplate",value:function(){var e=this.props,t=e.movies;return e.isFetching?r.a.createElement("p",{className:"loading"},"Loading..."):r.a.createElement("div",{className:"row movies-row"},this.renderMoviesList(t),r.a.createElement(ne,{totalRecords:20,pageNeighbours:1,onPageChanged:this.onPageChanged}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"movies-wrap"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"movies-wrap-header"},r.a.createElement("h3",{className:"movies-wrap-title"},"Movies"),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search"))),this.renderTemplate()))}}]),t}(n.Component)),ce=Object(p.b)(function(e){return{page:e.page.page}},function(e){return{getGenres:function(){return e(L())},getMovies:function(t){return e(D(t))}}})(re),oe=(a(48),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderNavigationMenuList",value:function(){return this.props.routes.map(function(e){return r.a.createElement("li",{className:"nav-item",key:d()},r.a.createElement(g.b,{exact:e.isExact,activeClassName:"active",className:"nav-link",to:e.path},e.name))})}},{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(g.b,{to:"/",className:"navbar-brand"},"Movies app"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},this.renderNavigationMenuList()))))}}]),t}(n.Component)),ie=a(16),se=(a(49),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"about-section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"section-title"},"About page")))))}}]),t}(n.Component)),le=(a(50),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;(0,this.props.getMovieDetails)(e)}},{key:"renderTemplate",value:function(){var e=this.props.movieDetails;if(e){e.backdrop_path,e.genres,e.homepage;var t=e.original_title,a=e.overview,n=e.poster_path,c=e.release_date,o=e.status,i=e.title,s=e.vote_average,l=e.vote_count;return r.a.createElement("div",{className:"container"},r.a.createElement(g.b,{to:"/",className:"navlink-back"},"< Go back"),r.a.createElement("h2",{className:"content-title"},i,"(",t,")"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("img",{src:b(n),alt:"movie-thumb",className:"img-thumbnail movie-thumb-full"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("ul",null,r.a.createElement("li",null,"Genres: "),r.a.createElement("li",null,"Releaase date: ",c),r.a.createElement("li",null,"Status: ",o),r.a.createElement("li",null,"Votes: ",l),r.a.createElement("li",null,"Vote average: ",s)),r.a.createElement("p",null,a))))}return""}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",{className:"page-content"},this.renderTemplate()))}}]),t}(n.Component)),ue=Object(p.b)(function(e){return{movieDetails:e.movieDetails.movieDetails}},function(e){return{getMovieDetails:function(t){return e(H(t))}}})(le),me=[{isNavBar:!0,isExact:!0,path:"/",name:"Home",component:ce},{isNavBar:!0,path:"/about",name:"About",component:se},{isNavBar:!1,path:"/movie/:id",name:"MovieItem",component:ue}],pe=(a(51),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component)),ve=(a(52),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"renderSwitchContent",value:function(){return r.a.createElement(ie.c,null,me.map(function(e){var t=e.component;return r.a.createElement(ie.a,{key:e.path,exact:e.isExact,path:e.path,component:t})}))}},{key:"getGenresListAsync",value:function(){var e=this.props.getGenres;return new Promise(function(t){e(),t(!0)}).catch(function(e){return console.error(e)})}},{key:"handleMoviesData",value:function(){var e=this.props,t=e.getMovies,a=e.page;this.getGenresListAsync().then(function(e){e&&t(a)})}},{key:"componentDidMount",value:function(){this.handleMoviesData()}},{key:"render",value:function(){var e=this.props.movies;return r.a.createElement(g.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{routes:me.filter(function(e){return e.isNavBar})}),r.a.createElement("main",{className:"main"},r.a.createElement(ie.c,null,r.a.createElement(ie.a,{key:"/",path:"/",render:function(){return r.a.createElement(ce,{isFetching:e.isFetching,movies:e.moviesData})},exact:!0}),"/>",r.a.createElement(ie.a,{key:"/about",path:"/about",component:se}),r.a.createElement(ie.a,{key:"/movie/:id",path:"/movie/:id",component:ue}),r.a.createElement(ie.a,{component:pe})))))}}]),t}(n.Component)),ge=Object(p.b)(function(e){return{movies:e.movies,genres:e.genres.genresData}},function(e){return{getGenres:function(){return e(L())},getMovies:function(t){return e(D(t))}}})(ve);o.a.render(r.a.createElement(p.a,{store:Z},r.a.createElement(ge,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.66d253a9.chunk.js.map